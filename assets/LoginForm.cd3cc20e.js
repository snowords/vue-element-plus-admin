import{_ as e}from"./Form.vue_vue_type_script_lang.ab075b90.js";import{u as a,d as o,c as s,e as t}from"./index.e670f1c8.js";import{b as l,O as r,V as i,r as n,w as c,G as d,o as p,f as m,g as u,k as f,P as g,u as b,H as h,X as w,Y as v,Z as j,_ as P}from"./vendor.eeac13a4.js";/* empty css                  */import"./tsxHelper.78774b44.js";/* empty css                */import{r as y}from"./formRules.5de48e7e.js";import{u as _}from"./useForm.68e0a337.js";import{l as R,g as x,a as I}from"./index.cd08576d.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";/* empty css               *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                        *//* empty css                  *//* empty css                   */import"./Editor.dbd06822.js";import"./useAxios.8e0bab25.js";const F={class:"text-2xl font-bold text-center w-[100%]"},k={class:"flex justify-between items-center w-[100%]"},V={class:"flex justify-between w-[100%]"};var A=z(l({setup(l){const z=a(),A=o(),{currentRoute:C,addRoute:D,push:q}=r(),{t:E}=s(),H={username:[y],password:[y]},U=i([{field:"title",colProps:{span:24}},{field:"username",label:E("login.username"),value:"admin",component:"Input",colProps:{span:24},componentProps:{placeholder:E("login.usernamePlaceholder")}},{field:"password",label:E("login.password"),value:"admin",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},placeholder:E("login.passwordPlaceholder")}},{field:"tool",colProps:{span:24}},{field:"login",colProps:{span:24}},{field:"other",component:"Divider",label:E("login.otherLogin"),componentProps:{contentPosition:"center"}},{field:"otherIcon",colProps:{span:24}}]),G=n(!1),{register:L,elFormRef:N,methods:O}=_(),X=n(!1),Y="#999",Z=n("");c((()=>C.value),(e=>{var a;Z.value=null==(a=null==e?void 0:e.query)?void 0:a.redirect}),{immediate:!0});const B=async()=>{const e=b(N);await(null==e?void 0:e.validate((async e=>{if(e){X.value=!0;const{getFormData:e}=O,a=await e(),o=await R(a).catch((()=>{})).finally((()=>X.value=!1));if(o){const{wsCache:e}=t();e.set(z.getUserInfo,o.data),J()}}})))},J=async()=>{const{getFormData:e}=O,a=await e(),o={roleName:a.username},s="admin"===a.username?await x({params:o}):await I({params:o});if(s){const{wsCache:e}=t(),o=s.data.list||[];e.set("roleRouters",o),"admin"===a.username?await A.generateRoutes("admin",o).catch((()=>{})):await A.generateRoutes("test",o).catch((()=>{})),A.getAddRouters.forEach((e=>{D(e)})),A.setIsAddRouters(!0),q({path:Z.value||A.addRouters[0].path})}};return(a,o)=>{const s=d("Icon");return p(),m(b(e),{schema:b(U),rules:H,"label-position":"top","hide-required-asterisk":"",size:"large",onRegister:b(L)},{title:u((()=>[f("h2",F,g(b(E)("login.login")),1)])),tool:u((()=>[f("div",k,[h(b(w),{modelValue:G.value,"onUpdate:modelValue":o[0]||(o[0]=e=>G.value=e),label:b(E)("login.remember"),size:"small"},null,8,["modelValue","label"]),h(b(j),{type:"primary",underline:!1},{default:u((()=>[v(g(b(E)("login.forgetPassword")),1)])),_:1})])])),login:u((()=>[h(b(P),{loading:X.value,type:"primary",class:"w-[100%]",onClick:B},{default:u((()=>[v(g(b(E)("login.login")),1)])),_:1},8,["loading"])])),otherIcon:u((()=>[f("div",V,[h(s,{icon:"ant-design:github-filled",size:30,class:"cursor-pointer anticon",color:Y}),h(s,{icon:"ant-design:wechat-filled",size:30,class:"cursor-pointer anticon",color:Y}),h(s,{icon:"ant-design:alipay-circle-filled",size:30,color:Y,class:"cursor-pointer anticon"}),h(s,{icon:"ant-design:weibo-circle-filled",size:30,color:Y,class:"cursor-pointer anticon"})])])),_:1},8,["schema","onRegister"])}}}),[["__scopeId","data-v-27b3f932"]]);export{A as default};
